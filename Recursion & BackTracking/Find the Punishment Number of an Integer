class Solution {
    public int punishmentNumber(int n) {
        int ans=0;

        for(int i=1;i<=n;i++){
            int square=i*i;
            String str=String.valueOf(square);

            if(checkPartition(0,str.length(),0,str,i)){
                ans+=square;
            }
        }
        
        return ans;
    }

    private boolean checkPartition(int i, int n, int currSum, String str, int value){

        if(i==n){
            if(currSum==value) return true;
        }

        if(currSum>value) return false;

        for(int j=i;j<n;j++){
            String substring=str.substring(i,j+1);
            int substringSum=Integer.parseInt(substring);

            if(checkPartition(j+1,n,currSum+substringSum,str,value)==true) return true;
        }

        return false;
    }
}
